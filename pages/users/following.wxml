<!-- *
    Fresns 微信小程序 (https://fresns.org)
    Copyright 2021-Present Jarvis Tang
    Licensed under the Apache-2.0 license
* -->
<page-meta root-font-size="system" />
<wxs module="util" src="/util/interactive.wxs"></wxs>
<view class="page" data-weui-theme="{{theme}}">
    <view class="weui-flex tab-navbar weui-navbar">
        <view class="weui-flex__item weui-navbar__item">
            <navigator url="/pages/users/index" open-type="redirect">主页</navigator>
        </view>
        <view class="weui-flex__item weui-navbar__item">
            <navigator url="/pages/users/list" open-type="redirect">列表</navigator>
        </view>
        <view class="weui-flex__item weui-navbar__item">
            <navigator url="/pages/users/follow" open-type="redirect">关注</navigator>
        </view>
        <view class="weui-flex__item weui-navbar__item">
            <navigator url="/pages/users/likes" open-type="redirect">我点赞</navigator>
        </view>
        <view class="weui-flex__item weui-navbar__item weui-navbar__item_on">
            <navigator url="/pages/users/following" open-type="redirect">我关注</navigator>
        </view>
        <view class="weui-flex__item weui-navbar__item">
            <navigator url="/pages/users/blocking" open-type="redirect">我屏蔽</navigator>
        </view>
    </view>
    <!-- 用户列表 -->
    <view wx:for="{{users}}" wx:for-index="idx" wx:for-item="user" wx:key="uid" class="user-list">
        <user user="{{user}}">
            <view slot="icons-body" class="user-icons weui-flex">
                <image wx:for="{{user.icons}}" wx:for-item="iconItem" wx:key="icon" src="{{iconItem.icon}}" alt="{{iconItem.name}}" mode="heightFix"></image>
            </view>
            <view slot="bio" class="user-bio">
                <navigator url="/pages/profile/index?uid={{user.uid}}">
                    {{user.bio || ''}}
                </navigator>
            </view>
            <view slot="btn" class="interactive-btn">
                <view class="weui-btn weui-btn_mini {{user.likeStatus === 1 ? 'weui-btn_primary' : 'weui-btn_default'}}" data-user="{{user}}" bind:tap="onClickUserLike">
                    <image wx:if="{{user.likeStatus === 0}}" class="weui-btn_cell__icon" src="/assets/images/like.png"></image>
                    <image wx:if="{{user.likeStatus === 1}}" class="weui-btn_cell__icon" src="/assets/images/like-active.png"></image>
                    {{user.stats.likeMeCount}}
                </view>
                <view class="weui-btn weui-btn_mini {{user.followStatus === 1 ? 'weui-btn_primary' : 'weui-btn_default'}}" data-user="{{user}}" bind:tap="onClickUserFollow">
                    <image wx:if="{{user.followStatus === 0}}" class="weui-btn_cell__icon" src="/assets/images/follow.png"></image>
                    <image wx:if="{{user.followStatus === 1}}" class="weui-btn_cell__icon" src="/assets/images/follow-active.png"></image>
                    {{user.stats.followMeCount}}
                </view>
                <view class="weui-btn weui-btn_mini {{user.blockStatus === 1 ? 'weui-btn_primary' : 'weui-btn_default'}}" data-user="{{user}}" bind:tap="onClickUserBlock">
                    <image wx:if="{{user.blockStatus === 0}}" class="weui-btn_cell__icon" src="/assets/images/block.png"></image>
                    <image wx:if="{{user.blockStatus === 1}}" class="weui-btn_cell__icon" src="/assets/images/block-active.png"></image>
                    {{user.stats.blockMeCount}}
                </view>
            </view>
        </user>
    </view>
    <view class="copyright">Powered by Fresns</view>
    <tabbar></tabbar>
</view>